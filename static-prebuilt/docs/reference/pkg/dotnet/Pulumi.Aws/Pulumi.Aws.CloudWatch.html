<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Namespace Pulumi.Aws.CloudWatch
   </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Namespace Pulumi.Aws.CloudWatch
   ">
    <meta name="generator" content="docfx 2.51.0.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="/docs/reference/pkg/dotnet/" style="margin-top: 5px">
                <img id="logo" class="svg" src="../logo.svg" alt="" style="height:40px">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Pulumi.Aws.CloudWatch">
  
  <h1 id="Pulumi_Aws_CloudWatch" data-uid="Pulumi.Aws.CloudWatch" class="text-break">Namespace Pulumi.Aws.CloudWatch
  </h1>
  <div class="markdown level0 summary"></div>
  <div class="markdown level0 conceptual"></div>
  <div class="markdown level0 remarks"></div>
    <h3 id="classes">Classes
  </h3>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.Dashboard.html">Dashboard</a></h4>
      <section><p>Provides a CloudWatch Dashboard resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var main = new Aws.CloudWatch.Dashboard(&amp;quot;main&amp;quot;, new Aws.CloudWatch.DashboardArgs
    {
        DashboardBody = @&amp;quot; {
&amp;quot;&amp;quot;widgets&amp;quot;&amp;quot;: [
   {
      &amp;quot;&amp;quot;type&amp;quot;&amp;quot;:&amp;quot;&amp;quot;metric&amp;quot;&amp;quot;,
      &amp;quot;&amp;quot;x&amp;quot;&amp;quot;:0,
      &amp;quot;&amp;quot;y&amp;quot;&amp;quot;:0,
      &amp;quot;&amp;quot;width&amp;quot;&amp;quot;:12,
      &amp;quot;&amp;quot;height&amp;quot;&amp;quot;:6,
      &amp;quot;&amp;quot;properties&amp;quot;&amp;quot;:{
         &amp;quot;&amp;quot;metrics&amp;quot;&amp;quot;:[
            [
               &amp;quot;&amp;quot;AWS/EC2&amp;quot;&amp;quot;,
               &amp;quot;&amp;quot;CPUUtilization&amp;quot;&amp;quot;,
               &amp;quot;&amp;quot;InstanceId&amp;quot;&amp;quot;,
               &amp;quot;&amp;quot;i-012345&amp;quot;&amp;quot;
            ]
         ],
         &amp;quot;&amp;quot;period&amp;quot;&amp;quot;:300,
         &amp;quot;&amp;quot;stat&amp;quot;&amp;quot;:&amp;quot;&amp;quot;Average&amp;quot;&amp;quot;,
         &amp;quot;&amp;quot;region&amp;quot;&amp;quot;:&amp;quot;&amp;quot;us-east-1&amp;quot;&amp;quot;,
         &amp;quot;&amp;quot;title&amp;quot;&amp;quot;:&amp;quot;&amp;quot;EC2 Instance CPU&amp;quot;&amp;quot;
      }
   },
   {
      &amp;quot;&amp;quot;type&amp;quot;&amp;quot;:&amp;quot;&amp;quot;text&amp;quot;&amp;quot;,
      &amp;quot;&amp;quot;x&amp;quot;&amp;quot;:0,
      &amp;quot;&amp;quot;y&amp;quot;&amp;quot;:7,
      &amp;quot;&amp;quot;width&amp;quot;&amp;quot;:3,
      &amp;quot;&amp;quot;height&amp;quot;&amp;quot;:3,
      &amp;quot;&amp;quot;properties&amp;quot;&amp;quot;:{
         &amp;quot;&amp;quot;markdown&amp;quot;&amp;quot;:&amp;quot;&amp;quot;Hello world&amp;quot;&amp;quot;
      }
   }
]
}

&amp;quot;,
        DashboardName = &amp;quot;my-dashboard&amp;quot;,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.DashboardArgs.html">DashboardArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.DashboardState.html">DashboardState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventPermission.html">EventPermission</a></h4>
      <section><p>Provides a resource to create a CloudWatch Events permission to support cross-account events in the current account default event bus.</p>
<h2 id="example-usage">Example Usage</h2>
<h3 id="account-access">Account Access</h3>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var devAccountAccess = new Aws.CloudWatch.EventPermission(&amp;quot;devAccountAccess&amp;quot;, new Aws.CloudWatch.EventPermissionArgs
    {
        Principal = &amp;quot;123456789012&amp;quot;,
        StatementId = &amp;quot;DevAccountAccess&amp;quot;,
    });
}

}
</code></pre>
<h3 id="organization-access">Organization Access</h3>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var organizationAccess = new Aws.CloudWatch.EventPermission(&amp;quot;organizationAccess&amp;quot;, new Aws.CloudWatch.EventPermissionArgs
    {
        Condition = new Aws.CloudWatch.Inputs.EventPermissionConditionArgs
        {
            Key = &amp;quot;aws:PrincipalOrgID&amp;quot;,
            Type = &amp;quot;StringEquals&amp;quot;,
            Value = aws_organizations_organization.Example.Id,
        },
        Principal = &amp;quot;*&amp;quot;,
        StatementId = &amp;quot;OrganizationAccess&amp;quot;,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventPermissionArgs.html">EventPermissionArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventPermissionState.html">EventPermissionState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventRule.html">EventRule</a></h4>
      <section><p>Provides a CloudWatch Event Rule resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var console = new Aws.CloudWatch.EventRule(&amp;quot;console&amp;quot;, new Aws.CloudWatch.EventRuleArgs
    {
        Description = &amp;quot;Capture each AWS Console Sign In&amp;quot;,
        EventPattern = @&amp;quot;{
&amp;quot;&amp;quot;detail-type&amp;quot;&amp;quot;: [
&amp;quot;&amp;quot;AWS Console Sign In via CloudTrail&amp;quot;&amp;quot;
]
}

&amp;quot;,
    });
    var awsLogins = new Aws.Sns.Topic(&amp;quot;awsLogins&amp;quot;, new Aws.Sns.TopicArgs
    {
    });
    var sns = new Aws.CloudWatch.EventTarget(&amp;quot;sns&amp;quot;, new Aws.CloudWatch.EventTargetArgs
    {
        Arn = awsLogins.Arn,
        Rule = console.Name,
    });
    var snsTopicPolicy = awsLogins.Arn.Apply(arn =&gt; Aws.Iam.GetPolicyDocument.InvokeAsync(new Aws.Iam.GetPolicyDocumentArgs
    {
        Statements = 
        {
            new Aws.Iam.Inputs.GetPolicyDocumentStatementArgs
            {
                Actions = 
                {
                    &amp;quot;SNS:Publish&amp;quot;,
                },
                Effect = &amp;quot;Allow&amp;quot;,
                Principals = 
                {
                    new Aws.Iam.Inputs.GetPolicyDocumentStatementPrincipalArgs
                    {
                        Identifiers = 
                        {
                            &amp;quot;events.amazonaws.com&amp;quot;,
                        },
                        Type = &amp;quot;Service&amp;quot;,
                    },
                },
                Resources = 
                {
                    arn,
                },
            },
        },
    }));
    var @default = new Aws.Sns.TopicPolicy(&amp;quot;default&amp;quot;, new Aws.Sns.TopicPolicyArgs
    {
        Arn = awsLogins.Arn,
        Policy = snsTopicPolicy.Apply(snsTopicPolicy =&gt; snsTopicPolicy.Json),
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventRuleArgs.html">EventRuleArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventRuleState.html">EventRuleState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventTarget.html">EventTarget</a></h4>
      <section><p>Provides a CloudWatch Event Target resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var console = new Aws.CloudWatch.EventRule(&amp;quot;console&amp;quot;, new Aws.CloudWatch.EventRuleArgs
    {
        Description = &amp;quot;Capture all EC2 scaling events&amp;quot;,
        EventPattern = @&amp;quot;{
&amp;quot;&amp;quot;source&amp;quot;&amp;quot;: [
&amp;quot;&amp;quot;aws.autoscaling&amp;quot;&amp;quot;
],
&amp;quot;&amp;quot;detail-type&amp;quot;&amp;quot;: [
&amp;quot;&amp;quot;EC2 Instance Launch Successful&amp;quot;&amp;quot;,
&amp;quot;&amp;quot;EC2 Instance Terminate Successful&amp;quot;&amp;quot;,
&amp;quot;&amp;quot;EC2 Instance Launch Unsuccessful&amp;quot;&amp;quot;,
&amp;quot;&amp;quot;EC2 Instance Terminate Unsuccessful&amp;quot;&amp;quot;
]
}

&amp;quot;,
    });
    var testStream = new Aws.Kinesis.Stream(&amp;quot;testStream&amp;quot;, new Aws.Kinesis.StreamArgs
    {
        ShardCount = 1,
    });
    var yada = new Aws.CloudWatch.EventTarget(&amp;quot;yada&amp;quot;, new Aws.CloudWatch.EventTargetArgs
    {
        Arn = testStream.Arn,
        Rule = console.Name,
        RunCommandTargets = 
        {
            new Aws.CloudWatch.Inputs.EventTargetRunCommandTargetArgs
            {
                Key = &amp;quot;tag:Name&amp;quot;,
                Values = 
                {
                    &amp;quot;FooBar&amp;quot;,
                },
            },
            new Aws.CloudWatch.Inputs.EventTargetRunCommandTargetArgs
            {
                Key = &amp;quot;InstanceIds&amp;quot;,
                Values = 
                {
                    &amp;quot;i-162058cd308bffec2&amp;quot;,
                },
            },
        },
    });
}

}
</code></pre>
<h2 id="example-ssm-document-usage">Example SSM Document Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var ssmLifecycleTrust = Output.Create(Aws.Iam.GetPolicyDocument.InvokeAsync(new Aws.Iam.GetPolicyDocumentArgs
    {
        Statements = 
        {
            new Aws.Iam.Inputs.GetPolicyDocumentStatementArgs
            {
                Actions = 
                {
                    &amp;quot;sts:AssumeRole&amp;quot;,
                },
                Principals = 
                {
                    new Aws.Iam.Inputs.GetPolicyDocumentStatementPrincipalArgs
                    {
                        Identifiers = 
                        {
                            &amp;quot;events.amazonaws.com&amp;quot;,
                        },
                        Type = &amp;quot;Service&amp;quot;,
                    },
                },
            },
        },
    }));
    var stopInstance = new Aws.Ssm.Document(&amp;quot;stopInstance&amp;quot;, new Aws.Ssm.DocumentArgs
    {
        Content = @&amp;quot;  {
&amp;quot;&amp;quot;schemaVersion&amp;quot;&amp;quot;: &amp;quot;&amp;quot;1.2&amp;quot;&amp;quot;,
&amp;quot;&amp;quot;description&amp;quot;&amp;quot;: &amp;quot;&amp;quot;Stop an instance&amp;quot;&amp;quot;,
&amp;quot;&amp;quot;parameters&amp;quot;&amp;quot;: {

},
&amp;quot;&amp;quot;runtimeConfig&amp;quot;&amp;quot;: {
  &amp;quot;&amp;quot;aws:runShellScript&amp;quot;&amp;quot;: {
    &amp;quot;&amp;quot;properties&amp;quot;&amp;quot;: [
      {
        &amp;quot;&amp;quot;id&amp;quot;&amp;quot;: &amp;quot;&amp;quot;0.aws:runShellScript&amp;quot;&amp;quot;,
        &amp;quot;&amp;quot;runCommand&amp;quot;&amp;quot;: [&amp;quot;&amp;quot;halt&amp;quot;&amp;quot;]
      }
    ]
  }
}
}

&amp;quot;,
        DocumentType = &amp;quot;Command&amp;quot;,
    });
    var ssmLifecyclePolicyDocument = stopInstance.Arn.Apply(arn =&gt; Aws.Iam.GetPolicyDocument.InvokeAsync(new Aws.Iam.GetPolicyDocumentArgs
    {
        Statements = 
        {
            new Aws.Iam.Inputs.GetPolicyDocumentStatementArgs
            {
                Actions = 
                {
                    &amp;quot;ssm:SendCommand&amp;quot;,
                },
                Condition = 
                {

                    {
                        { &amp;quot;test&amp;quot;, &amp;quot;StringEquals&amp;quot; },
                        { &amp;quot;values&amp;quot;, 
                        {
                            &amp;quot;*&amp;quot;,
                        } },
                        { &amp;quot;variable&amp;quot;, &amp;quot;ec2:ResourceTag/Terminate&amp;quot; },
                    },
                },
                Effect = &amp;quot;Allow&amp;quot;,
                Resources = 
                {
                    &amp;quot;arn:aws:ec2:eu-west-1:1234567890:instance/*&amp;quot;,
                },
            },
            new Aws.Iam.Inputs.GetPolicyDocumentStatementArgs
            {
                Actions = 
                {
                    &amp;quot;ssm:SendCommand&amp;quot;,
                },
                Effect = &amp;quot;Allow&amp;quot;,
                Resources = 
                {
                    arn,
                },
            },
        },
    }));
    var ssmLifecycleRole = new Aws.Iam.Role(&amp;quot;ssmLifecycleRole&amp;quot;, new Aws.Iam.RoleArgs
    {
        AssumeRolePolicy = ssmLifecycleTrust.Apply(ssmLifecycleTrust =&gt; ssmLifecycleTrust.Json),
    });
    var ssmLifecyclePolicy = new Aws.Iam.Policy(&amp;quot;ssmLifecyclePolicy&amp;quot;, new Aws.Iam.PolicyArgs
    {
        Policy = ssmLifecyclePolicyDocument.Apply(ssmLifecyclePolicyDocument =&gt; ssmLifecyclePolicyDocument.Json),
    });
    var stopInstancesEventRule = new Aws.CloudWatch.EventRule(&amp;quot;stopInstancesEventRule&amp;quot;, new Aws.CloudWatch.EventRuleArgs
    {
        Description = &amp;quot;Stop instances nightly&amp;quot;,
        ScheduleExpression = &amp;quot;cron(0 0 * * ? *)&amp;quot;,
    });
    var stopInstancesEventTarget = new Aws.CloudWatch.EventTarget(&amp;quot;stopInstancesEventTarget&amp;quot;, new Aws.CloudWatch.EventTargetArgs
    {
        Arn = stopInstance.Arn,
        RoleArn = ssmLifecycleRole.Arn,
        Rule = stopInstancesEventRule.Name,
        RunCommandTargets = 
        {
            new Aws.CloudWatch.Inputs.EventTargetRunCommandTargetArgs
            {
                Key = &amp;quot;tag:Terminate&amp;quot;,
                Values = 
                {
                    &amp;quot;midnight&amp;quot;,
                },
            },
        },
    });
}

}
</code></pre>
<h2 id="example-runcommand-usage">Example RunCommand Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var stopInstancesEventRule = new Aws.CloudWatch.EventRule(&amp;quot;stopInstancesEventRule&amp;quot;, new Aws.CloudWatch.EventRuleArgs
    {
        Description = &amp;quot;Stop instances nightly&amp;quot;,
        ScheduleExpression = &amp;quot;cron(0 0 * * ? *)&amp;quot;,
    });
    var stopInstancesEventTarget = new Aws.CloudWatch.EventTarget(&amp;quot;stopInstancesEventTarget&amp;quot;, new Aws.CloudWatch.EventTargetArgs
    {
        Arn = $&amp;quot;arn:aws:ssm:{@var.Aws_region}::document/AWS-RunShellScript&amp;quot;,
        Input = &amp;quot;{\&amp;quot;commands\&amp;quot;:[\&amp;quot;halt\&amp;quot;]}&amp;quot;,
        RoleArn = aws_iam_role.Ssm_lifecycle.Arn,
        Rule = stopInstancesEventRule.Name,
        RunCommandTargets = 
        {
            new Aws.CloudWatch.Inputs.EventTargetRunCommandTargetArgs
            {
                Key = &amp;quot;tag:Terminate&amp;quot;,
                Values = 
                {
                    &amp;quot;midnight&amp;quot;,
                },
            },
        },
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventTargetArgs.html">EventTargetArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.EventTargetState.html">EventTargetState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.GetLogGroup.html">GetLogGroup</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.GetLogGroupArgs.html">GetLogGroupArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.GetLogGroupResult.html">GetLogGroupResult</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogDestination.html">LogDestination</a></h4>
      <section><p>Provides a CloudWatch Logs destination resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var testDestination = new Aws.CloudWatch.LogDestination(&amp;quot;testDestination&amp;quot;, new Aws.CloudWatch.LogDestinationArgs
    {
        RoleArn = aws_iam_role.Iam_for_cloudwatch.Arn,
        TargetArn = aws_kinesis_stream.Kinesis_for_cloudwatch.Arn,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogDestinationArgs.html">LogDestinationArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogDestinationPolicy.html">LogDestinationPolicy</a></h4>
      <section><p>Provides a CloudWatch Logs destination policy resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var testDestination = new Aws.CloudWatch.LogDestination(&amp;quot;testDestination&amp;quot;, new Aws.CloudWatch.LogDestinationArgs
    {
        RoleArn = aws_iam_role.Iam_for_cloudwatch.Arn,
        TargetArn = aws_kinesis_stream.Kinesis_for_cloudwatch.Arn,
    });
    var testDestinationPolicyPolicyDocument = testDestination.Arn.Apply(arn =&gt; Aws.Iam.GetPolicyDocument.InvokeAsync(new Aws.Iam.GetPolicyDocumentArgs
    {
        Statements = 
        {
            new Aws.Iam.Inputs.GetPolicyDocumentStatementArgs
            {
                Actions = 
                {
                    &amp;quot;logs:PutSubscriptionFilter&amp;quot;,
                },
                Effect = &amp;quot;Allow&amp;quot;,
                Principals = 
                {
                    new Aws.Iam.Inputs.GetPolicyDocumentStatementPrincipalArgs
                    {
                        Identifiers = 
                        {
                            &amp;quot;123456789012&amp;quot;,
                        },
                        Type = &amp;quot;AWS&amp;quot;,
                    },
                },
                Resources = 
                {
                    arn,
                },
            },
        },
    }));
    var testDestinationPolicyLogDestinationPolicy = new Aws.CloudWatch.LogDestinationPolicy(&amp;quot;testDestinationPolicyLogDestinationPolicy&amp;quot;, new Aws.CloudWatch.LogDestinationPolicyArgs
    {
        AccessPolicy = testDestinationPolicyPolicyDocument.Apply(testDestinationPolicyPolicyDocument =&gt; testDestinationPolicyPolicyDocument.Json),
        DestinationName = testDestination.Name,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogDestinationPolicyArgs.html">LogDestinationPolicyArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogDestinationPolicyState.html">LogDestinationPolicyState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogDestinationState.html">LogDestinationState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogGroup.html">LogGroup</a></h4>
      <section><p>Provides a CloudWatch Log Group resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var yada = new Aws.CloudWatch.LogGroup(&amp;quot;yada&amp;quot;, new Aws.CloudWatch.LogGroupArgs
    {
        Tags = 
        {
            { &amp;quot;Application&amp;quot;, &amp;quot;serviceA&amp;quot; },
            { &amp;quot;Environment&amp;quot;, &amp;quot;production&amp;quot; },
        },
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogGroupArgs.html">LogGroupArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogGroupState.html">LogGroupState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogMetricFilter.html">LogMetricFilter</a></h4>
      <section><p>Provides a CloudWatch Log Metric Filter resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var dada = new Aws.CloudWatch.LogGroup(&amp;quot;dada&amp;quot;, new Aws.CloudWatch.LogGroupArgs
    {
    });
    var yada = new Aws.CloudWatch.LogMetricFilter(&amp;quot;yada&amp;quot;, new Aws.CloudWatch.LogMetricFilterArgs
    {
        LogGroupName = dada.Name,
        MetricTransformation = new Aws.CloudWatch.Inputs.LogMetricFilterMetricTransformationArgs
        {
            Name = &amp;quot;EventCount&amp;quot;,
            Namespace = &amp;quot;YourNamespace&amp;quot;,
            Value = &amp;quot;1&amp;quot;,
        },
        Pattern = &amp;quot;&amp;quot;,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogMetricFilterArgs.html">LogMetricFilterArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogMetricFilterState.html">LogMetricFilterState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogResourcePolicy.html">LogResourcePolicy</a></h4>
      <section><p>Provides a resource to manage a CloudWatch log resource policy.</p>
<h2 id="example-usage">Example Usage</h2>
<h3 id="elasticsearch-log-publishing">Elasticsearch Log Publishing</h3>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var elasticsearch_log_publishing_policyPolicyDocument = Output.Create(Aws.Iam.GetPolicyDocument.InvokeAsync(new Aws.Iam.GetPolicyDocumentArgs
    {
        Statements = 
        {
            new Aws.Iam.Inputs.GetPolicyDocumentStatementArgs
            {
                Actions = 
                {
                    &amp;quot;logs:CreateLogStream&amp;quot;,
                    &amp;quot;logs:PutLogEvents&amp;quot;,
                    &amp;quot;logs:PutLogEventsBatch&amp;quot;,
                },
                Principals = 
                {
                    new Aws.Iam.Inputs.GetPolicyDocumentStatementPrincipalArgs
                    {
                        Identifiers = 
                        {
                            &amp;quot;es.amazonaws.com&amp;quot;,
                        },
                        Type = &amp;quot;Service&amp;quot;,
                    },
                },
                Resources = 
                {
                    &amp;quot;arn:aws:logs:*&amp;quot;,
                },
            },
        },
    }));
    var elasticsearch_log_publishing_policyLogResourcePolicy = new Aws.CloudWatch.LogResourcePolicy(&amp;quot;elasticsearch-log-publishing-policyLogResourcePolicy&amp;quot;, new Aws.CloudWatch.LogResourcePolicyArgs
    {
        PolicyDocument = elasticsearch_log_publishing_policyPolicyDocument.Apply(elasticsearch_log_publishing_policyPolicyDocument =&gt; elasticsearch_log_publishing_policyPolicyDocument.Json),
        PolicyName = &amp;quot;elasticsearch-log-publishing-policy&amp;quot;,
    });
}

}
</code></pre>
<h3 id="route53-query-logging">Route53 Query Logging</h3>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var route53_query_logging_policyPolicyDocument = Output.Create(Aws.Iam.GetPolicyDocument.InvokeAsync(new Aws.Iam.GetPolicyDocumentArgs
    {
        Statements = 
        {
            new Aws.Iam.Inputs.GetPolicyDocumentStatementArgs
            {
                Actions = 
                {
                    &amp;quot;logs:CreateLogStream&amp;quot;,
                    &amp;quot;logs:PutLogEvents&amp;quot;,
                },
                Principals = 
                {
                    new Aws.Iam.Inputs.GetPolicyDocumentStatementPrincipalArgs
                    {
                        Identifiers = 
                        {
                            &amp;quot;route53.amazonaws.com&amp;quot;,
                        },
                        Type = &amp;quot;Service&amp;quot;,
                    },
                },
                Resources = 
                {
                    &amp;quot;arn:aws:logs:*:*:log-group:/aws/route53/*&amp;quot;,
                },
            },
        },
    }));
    var route53_query_logging_policyLogResourcePolicy = new Aws.CloudWatch.LogResourcePolicy(&amp;quot;route53-query-logging-policyLogResourcePolicy&amp;quot;, new Aws.CloudWatch.LogResourcePolicyArgs
    {
        PolicyDocument = route53_query_logging_policyPolicyDocument.Apply(route53_query_logging_policyPolicyDocument =&gt; route53_query_logging_policyPolicyDocument.Json),
        PolicyName = &amp;quot;route53-query-logging-policy&amp;quot;,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogResourcePolicyArgs.html">LogResourcePolicyArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogResourcePolicyState.html">LogResourcePolicyState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogStream.html">LogStream</a></h4>
      <section><p>Provides a CloudWatch Log Stream resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var yada = new Aws.CloudWatch.LogGroup(&amp;quot;yada&amp;quot;, new Aws.CloudWatch.LogGroupArgs
    {
    });
    var foo = new Aws.CloudWatch.LogStream(&amp;quot;foo&amp;quot;, new Aws.CloudWatch.LogStreamArgs
    {
        LogGroupName = yada.Name,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogStreamArgs.html">LogStreamArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogStreamState.html">LogStreamState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogSubscriptionFilter.html">LogSubscriptionFilter</a></h4>
      <section><p>Provides a CloudWatch Logs subscription filter resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var testLambdafunctionLogfilter = new Aws.CloudWatch.LogSubscriptionFilter(&amp;quot;testLambdafunctionLogfilter&amp;quot;, new Aws.CloudWatch.LogSubscriptionFilterArgs
    {
        DestinationArn = aws_kinesis_stream.Test_logstream.Arn,
        Distribution = &amp;quot;Random&amp;quot;,
        FilterPattern = &amp;quot;logtype test&amp;quot;,
        LogGroup = &amp;quot;/aws/lambda/example_lambda_name&amp;quot;,
        RoleArn = aws_iam_role.Iam_for_lambda.Arn,
    });
}

}
</code></pre>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogSubscriptionFilterArgs.html">LogSubscriptionFilterArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.LogSubscriptionFilterState.html">LogSubscriptionFilterState</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.MetricAlarm.html">MetricAlarm</a></h4>
      <section><p>Provides a CloudWatch Metric Alarm resource.</p>
<h2 id="example-usage">Example Usage</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var foobar = new Aws.CloudWatch.MetricAlarm(&amp;quot;foobar&amp;quot;, new Aws.CloudWatch.MetricAlarmArgs
    {
        AlarmDescription = &amp;quot;This metric monitors ec2 cpu utilization&amp;quot;,
        ComparisonOperator = &amp;quot;GreaterThanOrEqualToThreshold&amp;quot;,
        EvaluationPeriods = &amp;quot;2&amp;quot;,
        InsufficientDataActions = {},
        MetricName = &amp;quot;CPUUtilization&amp;quot;,
        Namespace = &amp;quot;AWS/EC2&amp;quot;,
        Period = &amp;quot;120&amp;quot;,
        Statistic = &amp;quot;Average&amp;quot;,
        Threshold = &amp;quot;80&amp;quot;,
    });
}

}
</code></pre>
<h2 id="example-in-conjunction-with-scaling-policies">Example in Conjunction with Scaling Policies</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var batPolicy = new Aws.AutoScaling.Policy(&amp;quot;batPolicy&amp;quot;, new Aws.AutoScaling.PolicyArgs
    {
        AdjustmentType = &amp;quot;ChangeInCapacity&amp;quot;,
        AutoscalingGroupName = aws_autoscaling_group.Bar.Name,
        Cooldown = 300,
        ScalingAdjustment = 4,
    });
    var batMetricAlarm = new Aws.CloudWatch.MetricAlarm(&amp;quot;batMetricAlarm&amp;quot;, new Aws.CloudWatch.MetricAlarmArgs
    {
        AlarmActions = 
        {
            batPolicy.Arn,
        },
        AlarmDescription = &amp;quot;This metric monitors ec2 cpu utilization&amp;quot;,
        ComparisonOperator = &amp;quot;GreaterThanOrEqualToThreshold&amp;quot;,
        Dimensions = 
        {
            { &amp;quot;AutoScalingGroupName&amp;quot;, aws_autoscaling_group.Bar.Name },
        },
        EvaluationPeriods = &amp;quot;2&amp;quot;,
        MetricName = &amp;quot;CPUUtilization&amp;quot;,
        Namespace = &amp;quot;AWS/EC2&amp;quot;,
        Period = &amp;quot;120&amp;quot;,
        Statistic = &amp;quot;Average&amp;quot;,
        Threshold = &amp;quot;80&amp;quot;,
    });
}

}
</code></pre>
<h2 id="example-with-an-expression">Example with an Expression</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var foobar = new Aws.CloudWatch.MetricAlarm(&amp;quot;foobar&amp;quot;, new Aws.CloudWatch.MetricAlarmArgs
    {
        AlarmDescription = &amp;quot;Request error rate has exceeded 10%&amp;quot;,
        ComparisonOperator = &amp;quot;GreaterThanOrEqualToThreshold&amp;quot;,
        EvaluationPeriods = &amp;quot;2&amp;quot;,
        InsufficientDataActions = {},
        MetricQueries = 
        {
            new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryArgs
            {
                Expression = &amp;quot;m2/m1*100&amp;quot;,
                Id = &amp;quot;e1&amp;quot;,
                Label = &amp;quot;Error Rate&amp;quot;,
                ReturnData = &amp;quot;true&amp;quot;,
            },
            new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryArgs
            {
                Id = &amp;quot;m1&amp;quot;,
                Metric = new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryMetricArgs
                {
                    Dimensions = 
                    {
                        { &amp;quot;LoadBalancer&amp;quot;, &amp;quot;app/web&amp;quot; },
                    },
                    MetricName = &amp;quot;RequestCount&amp;quot;,
                    Namespace = &amp;quot;AWS/ApplicationELB&amp;quot;,
                    Period = &amp;quot;120&amp;quot;,
                    Stat = &amp;quot;Sum&amp;quot;,
                    Unit = &amp;quot;Count&amp;quot;,
                },
            },
            new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryArgs
            {
                Id = &amp;quot;m2&amp;quot;,
                Metric = new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryMetricArgs
                {
                    Dimensions = 
                    {
                        { &amp;quot;LoadBalancer&amp;quot;, &amp;quot;app/web&amp;quot; },
                    },
                    MetricName = &amp;quot;HTTPCode_ELB_5XX_Count&amp;quot;,
                    Namespace = &amp;quot;AWS/ApplicationELB&amp;quot;,
                    Period = &amp;quot;120&amp;quot;,
                    Stat = &amp;quot;Sum&amp;quot;,
                    Unit = &amp;quot;Count&amp;quot;,
                },
            },
        },
        Threshold = &amp;quot;10&amp;quot;,
    });
}

}
</code></pre>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var xxAnomalyDetection = new Aws.CloudWatch.MetricAlarm(&amp;quot;xxAnomalyDetection&amp;quot;, new Aws.CloudWatch.MetricAlarmArgs
    {
        AlarmDescription = &amp;quot;This metric monitors ec2 cpu utilization&amp;quot;,
        ComparisonOperator = &amp;quot;GreaterThanUpperThreshold&amp;quot;,
        EvaluationPeriods = &amp;quot;2&amp;quot;,
        InsufficientDataActions = {},
        MetricQueries = 
        {
            new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryArgs
            {
                Expression = &amp;quot;ANOMALY_DETECTION_BAND(m1)&amp;quot;,
                Id = &amp;quot;e1&amp;quot;,
                Label = &amp;quot;CPUUtilization (Expected)&amp;quot;,
                ReturnData = &amp;quot;true&amp;quot;,
            },
            new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryArgs
            {
                Id = &amp;quot;m1&amp;quot;,
                Metric = new Aws.CloudWatch.Inputs.MetricAlarmMetricQueryMetricArgs
                {
                    Dimensions = 
                    {
                        { &amp;quot;InstanceId&amp;quot;, &amp;quot;i-abc123&amp;quot; },
                    },
                    MetricName = &amp;quot;CPUUtilization&amp;quot;,
                    Namespace = &amp;quot;AWS/EC2&amp;quot;,
                    Period = &amp;quot;120&amp;quot;,
                    Stat = &amp;quot;Average&amp;quot;,
                    Unit = &amp;quot;Count&amp;quot;,
                },
                ReturnData = &amp;quot;true&amp;quot;,
            },
        },
        ThresholdMetricId = &amp;quot;e1&amp;quot;,
    });
}

}
</code></pre>
<h2 id="example-of-monitoring-healthy-hosts-on-nlb-using-target-group-and-nlb">Example of monitoring Healthy Hosts on NLB using Target Group and NLB</h2>
<pre><code class="lang-csharp">using Pulumi;
using Aws = Pulumi.Aws;

class MyStack : Stack
{
public MyStack()
{
    var xxxNlbHealthyhosts = new Aws.CloudWatch.MetricAlarm(&amp;quot;xxxNlbHealthyhosts&amp;quot;, new Aws.CloudWatch.MetricAlarmArgs
    {
        ComparisonOperator = &amp;quot;LessThanThreshold&amp;quot;,
        EvaluationPeriods = &amp;quot;1&amp;quot;,
        MetricName = &amp;quot;HealthyHostCount&amp;quot;,
        Namespace = &amp;quot;AWS/NetworkELB&amp;quot;,
        Period = &amp;quot;60&amp;quot;,
        Statistic = &amp;quot;Average&amp;quot;,
        Threshold = @var.Logstash_servers_count,
        AlarmDescription = &amp;quot;Number of XXXX nodes healthy in Target Group&amp;quot;,
        ActionsEnabled = &amp;quot;true&amp;quot;,
        AlarmActions = 
        {
            aws_sns_topic.Sns.Arn,
        },
        OkActions = 
        {
            aws_sns_topic.Sns.Arn,
        },
        Dimensions = 
        {
            { &amp;quot;TargetGroup&amp;quot;, aws_lb_target_group.Lb_tg.Arn_suffix },
            { &amp;quot;LoadBalancer&amp;quot;, aws_lb.Lb.Arn_suffix },
        },
    });
}

}
</code></pre>
<blockquote>
<p><strong>NOTE:</strong>  You cannot create a metric alarm consisting of both <code>statistic</code> and <code>extended_statistic</code> parameters.
You must choose one or the other</p>
</blockquote>
</section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.MetricAlarmArgs.html">MetricAlarmArgs</a></h4>
      <section></section>
      <h4><a class="xref" href="Pulumi.Aws.CloudWatch.MetricAlarmState.html">MetricAlarmState</a></h4>
      <section></section>
</article>
          </div>
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            Copyright 2016-2020, Pulumi Corporation.
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
